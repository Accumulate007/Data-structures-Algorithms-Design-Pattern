<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>抽象工厂模式</title>
</head>
<body>



<script>
/**
 *抽象工厂模式(Abstract Pattern)
 *只要实现了抽象类的实例，都实现了抽象类定制的结构。
 *
 *
*/


class AbstractClass {
    constructor() {
        if(new.target === AbstractClass) {
            throw new Error('抽象类不能直接实例化');
        }
    }
}

// 通用抽象工厂模式实现


// 工厂抽象类
class AbstractFactory {
    constructor() {
        if(new.target === AbstractFactory) {
            throw new Error('抽象类不能直接实例化');
        }
    }

    createProduct1() {
        throw new Error('抽象方法无法调用');
    }
}

// 具体类
class Factory extends AbstractFactory {
    constructor() {
        super();
    }

    createProduct1(type) {
        switch(type) {
            case 'Product1': 
                return new Product1();
            case 'Product2': 
                return new Product2();
            default: 
                throw new Error('there is no such thing...');
        }
    }
}


// 抽象产品类
class AbstractProduct {
    constructor() {
        if(new.target === AbstractProduct) {
            throw new Error('抽象类不能直接实例化');
        }
        this.kid = 'product1';
    }

    operate() {
        throw new Error('抽象方法无法调用');
    }
}


// 具体产品类
class Product1 extends AbstractProduct {
    constructor() {
        super();
        this.type = 'Product1';
    }

    operate() {
        console.log(this.kid + '~~~' + this.type);
    }
}


/**
工厂模式和抽象工厂模式的区别
1.工厂模式 主要关注单独的产品实例的创建
2.抽象工厂模式 主要关注产品类簇实例的创建，如果产品类簇只有一个产品，那么此时的抽象工厂模式就退化为工厂模式了

*/




</script>
</body>
</html>
